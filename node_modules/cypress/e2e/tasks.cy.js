describe('Task Management', () => {
  beforeEach(() => {
    cy.login(); // Custom command to log in
    cy.visit('/tasks');
  });

  it('creates a new task', () => {
    cy.get('[data-cy=new-task-input]').type('Buy milk');
    cy.get('[data-cy=add-task-button]').click();
    cy.contains('Buy milk').should('exist');
  });

  it('edits an existing task', () => {
    cy.contains('Buy milk').parent().find('[data-cy=edit-button]').click();
    cy.get('[data-cy=edit-task-input]').clear().type('Buy almond milk');
    cy.get('[data-cy=save-button]').click();
    cy.contains('Buy almond milk').should('exist');
  });

  it('deletes a task', () => {
    cy.contains('Buy almond milk').parent().find('[data-cy=delete-button]').click();
    cy.contains('Buy almond milk').should('not.exist');
  });
});